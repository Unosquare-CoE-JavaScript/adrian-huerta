<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Methods, Properties and Watchers</title>
    <script type="importmap">
      {
        "imports": {
          "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
        }
      }
    </script>
  </head>
  <body>
    <div id="app">
      <ul>
        <li v-for="comment in comments" :key="comment">{{ comment }}</li>
      </ul>
      <input
        v-model="newComment"
        @keyup.enter="addComment"
        type="text"
        name="txtComment"
        id="txtComment"
        placeholder="Add a comment"
      />
      <br />
      <h3>
        Sort titles by:
        <button @click="sortLowest">Lowest Rated</button>
        <button @click="sortHighest">Highest Rated</button>
      </h3>
      <table border="1">
        <thead>
          <tr>
            <th v-for="key in columns">{{ key }}</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="entry in ratingsInfo">
            <td v-for="key in columns">{{ entry[key] }}</td>
          </tr>
        </tbody>
      </table>
      <br />
      <h2>Computed properties</h2>
      <h3>Your name: <input type="text" v-model.lazy="userData" /></h3>
      <h2 v-if="userData">Initial entry: {{ userData }}</h2>
      <h2 v-if="userData">Computed value: {{ greeting }}</h2>
    </div>
  </body>
</html>

<script type="module">
  import { createApp } from "vue";

  const App = {
    data() {
      return {
        newComment: "",
        comments: ["Dummy comment", "Another comment"],
        columns: ["title", "rating"],
        ratingsInfo: [
          { title: "White Chicks", rating: 82 },
          { title: "GreyÂ´s Anatomy", rating: 98 },
          { title: "Prison Break", rating: 99 },
          { title: "How I Met Your Mother", rating: 95 },
        ],
        userData: "",
      };
    },
    methods: {
      addComment() {
        this.comments.push(this.newComment);
        this.newComment = "";
      },
      sortLowest() {
        this.ratingsInfo.sort((a, b) => (a.rating > b.rating ? 1 : -1));
      },
      sortHighest() {
        this.ratingsInfo.sort((a, b) => (a.rating < b.rating ? 1 : -1));
      },
    },
    computed: {
      greeting() {
        console.log("Render again");
        return `Welcome back, ${this.userData}`;
      },
    },
  };

  createApp(App).mount("#app");
</script>
